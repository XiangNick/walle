(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b2b797b"],{"16d8":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:e.id}})},r=[],i=a("db72"),n=(a("a7be"),a("44f8"),a("a6e0"),a("547e")),s=a.n(n),d={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},l={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return d}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var e=Object.assign({},d,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}},watch:{value:function(e,t){e!==t&&e!==this.editor.getValue()&&this.editor.setValue(e)},language:function(e){this.destroyEditor(),this.initEditor()},height:function(e){this.editor.height(e)},mode:function(e){this.editor.changeMode(e)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var e=this;this.editor=new s.a(Object(i["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){e.$emit("input",e.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(e){this.editor.setValue(e)},getValue:function(){return this.editor.getValue()},setHtml:function(e){this.editor.setHtml(e)},getHtml:function(){return this.editor.getHtml()}}},u=l,c=a("2877"),b=Object(c["a"])(u,o,r,!1,null,null,null);t["a"]=b.exports},"32b8":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"board",attrs:{model:e.board,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"模板编码"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.board.boardCode,callback:function(t){e.$set(e.board,"boardCode",t)},expression:"board.boardCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板名称"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.board.boardName,callback:function(t){e.$set(e.board,"boardName",t)},expression:"board.boardName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"消息类型"}},[a("el-radio-group",{attrs:{disabled:!0},model:{value:e.board.messageType,callback:function(t){e.$set(e.board,"messageType",t)},expression:"board.messageType"}},[a("el-radio",{attrs:{label:"TEXT"}},[e._v("Text")]),e._v(" "),a("el-radio",{attrs:{label:"MARKDOWN"}},[e._v("Markdown")]),e._v(" "),a("el-radio",{attrs:{label:"LINK"}},[e._v("Link")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"LINK"==e.board.messageType||"MARKDOWN"==e.board.messageType,expression:"board.messageType=='LINK' || board.messageType=='MARKDOWN'"}],attrs:{label:"消息标题"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.board.title,callback:function(t){e.$set(e.board,"title",t)},expression:"board.title"}})],1),e._v(" "),"LINK"==e.board.messageType||"TEXT"==e.board.messageType?a("el-form-item",{attrs:{label:"消息正文"}},[a("el-input",{attrs:{type:"textarea",rows:"3",disabled:!0},model:{value:e.board.content,callback:function(t){e.$set(e.board,"content",t)},expression:"board.content"}})],1):e._e(),e._v(" "),"MARKDOWN"==e.board.messageType?a("el-form-item",{attrs:{label:"消息正文"}},[a("markdown-editor",{ref:"markdownEditor",staticStyle:{"line-height":"1px"},attrs:{options:{hideModeSwitch:!0,previewStyle:"tab"}},model:{value:e.board.content,callback:function(t){e.$set(e.board,"content",t)},expression:"board.content"}})],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"TEXT"==e.board.messageType||"MARKDOWN"==e.board.messageType,expression:"board.messageType=='TEXT' || board.messageType=='MARKDOWN'"}],attrs:{label:"@所有人"}},[a("el-radio-group",{attrs:{disabled:!0},model:{value:e.board.atAll,callback:function(t){e.$set(e.board,"atAll",t)},expression:"board.atAll"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"LINK"==e.board.messageType,expression:"board.messageType=='LINK'"}],attrs:{label:"跳转链接"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.board.linkMessageUrl,callback:function(t){e.$set(e.board,"linkMessageUrl",t)},expression:"board.linkMessageUrl"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"LINK"==e.board.messageType,expression:"board.messageType=='LINK'"}],attrs:{label:"配图链接"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.board.linkPicUrl,callback:function(t){e.$set(e.board,"linkPicUrl",t)},expression:"board.linkPicUrl"}})],1),e._v(" "),e._l(e.board.addresses,(function(t,o){return a("el-form-item",{key:o,attrs:{label:"接收目标"+(o+1)}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{disabled:!0,placeholder:"机器人名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"address.name"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{disabled:!0,placeholder:"accessToken"},model:{value:t.groupAccessToken,callback:function(a){e.$set(t,"groupAccessToken",a)},expression:"address.groupAccessToken"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{disabled:!0,placeholder:"规则条件"},model:{value:t.condition,callback:function(a){e.$set(t,"condition",a)},expression:"address.condition"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{disabled:!0,placeholder:"Secret"},model:{value:t.secret,callback:function(a){e.$set(t,"secret",a)},expression:"address.secret"}})],1)],1)],1)})),e._v(" "),a("el-form-item",{attrs:{label:"携带数据"}},[a("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"发送消息时携带的数据，目前仅支持json格式"},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})],1),e._v(" "),a("el-form-item",[e.showSubmitBtn?a("el-button",{attrs:{type:"primary",disabled:e.submiting,loading:e.submiting},on:{click:e.doSubmit}},[e._v(e._s(e.submiting?"发送中...":"发 送"))]):e._e(),e._v(" "),a("router-link",{attrs:{to:"/board/group"}},[a("el-button",[e._v("取 消")])],1)],1)],2)],1)},r=[],i=(a("28a5"),a("6b54"),a("e7d3")),n=a("b775");function s(e,t){return Object(n["a"])({url:"/groupMsg/send",method:"post",data:{boardCode:e,data:t}})}var d=a("16d8"),l={data:function(){return{board:{boardCode:"",boardName:"",messageType:"",title:"",content:"",atAll:"",linkMessageUrl:"",linkPicUrl:"",addresses:[{name:"",groupAccessToken:"",condition:""}]},data:"",showSubmitBtn:!0,submiting:!1}},components:{MarkdownEditor:d["a"]},created:function(){var e=this.$route.params;e.boardCode&&this.findData(e.boardCode)},methods:{findData:function(e){var t=this;Object(i["b"])(e).then((function(e){t.board=e,void 0!=e.atAll&&(t.board.atAll=e.atAll.toString()),t.modify=!0})).catch((function(e){t.$notify({title:"提示",type:"info",message:e.errorMsg}),t.showSubmitBtn=!1}))},doSubmit:function(){var e=this;this.submiting||(this.submiting=!0,s(this.board.boardCode,this.data).then((function(t){e.$notify({title:"发送成功",type:"success",message:"消息发送成功!"}),e.submiting=!1})).catch((function(t){e.submiting=!1;var a=t.errorMsg.split("##"),o=a.map((function(e){return"<p>"+e+"</p>"})).join("");e.$notify({title:"发送失败("+t.errorCode+")",type:"error",dangerouslyUseHTMLString:!0,message:o})})))}}},u=l,c=a("2877"),b=Object(c["a"])(u,o,r,!1,null,"fb91ae1c",null);t["default"]=b.exports},e7d3:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return d})),a.d(t,"d",(function(){return l}));var o=a("b775");function r(e,t,a){return Object(o["a"])({url:"/groupBoard/list",method:"get",params:{pageNo:e,pageSize:t,query:a}})}function i(e){return Object(o["a"])({url:"/groupBoard/"+e,method:"get"})}function n(e){return Object(o["a"])({url:"/groupBoard/create",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/groupBoard/modify",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/groupBoard/remove",method:"post",params:{boardCode:e}})}function l(){return Object(o["a"])({url:"/groupBoard/cnt",method:"get"})}}}]);