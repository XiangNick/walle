(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-539f34ff"],{"16d8":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:e.id}})},i=[],r=a("db72"),s=(a("a7be"),a("44f8"),a("a6e0"),a("547e")),n=a.n(s),l={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},d={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return l}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var e=Object.assign({},l,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}},watch:{value:function(e,t){e!==t&&e!==this.editor.getValue()&&this.editor.setValue(e)},language:function(e){this.destroyEditor(),this.initEditor()},height:function(e){this.editor.height(e)},mode:function(e){this.editor.changeMode(e)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var e=this;this.editor=new n.a(Object(r["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){e.$emit("input",e.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(e){this.editor.setValue(e)},getValue:function(){return this.editor.getValue()},setHtml:function(e){this.editor.setHtml(e)},getHtml:function(){return this.editor.getHtml()}}},c=d,u=a("2877"),b=Object(u["a"])(c,o,i,!1,null,null,null);t["a"]=b.exports},"588f":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"board",attrs:{model:e.board,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"模板编码"}},[a("el-input",{attrs:{placeholder:"模板编码，必须保持唯一性",disabled:1==e.modify},model:{value:e.board.boardCode,callback:function(t){e.$set(e.board,"boardCode",t)},expression:"board.boardCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板名称"}},[a("el-input",{attrs:{placeholder:"模板名称"},model:{value:e.board.boardName,callback:function(t){e.$set(e.board,"boardName",t)},expression:"board.boardName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"消息类型"}},[a("el-radio-group",{model:{value:e.board.messageType,callback:function(t){e.$set(e.board,"messageType",t)},expression:"board.messageType"}},[a("el-radio",{attrs:{label:"TEXT"}},[e._v("Text")]),e._v(" "),a("el-radio",{attrs:{label:"MARKDOWN"}},[e._v("Markdown")]),e._v(" "),a("el-radio",{attrs:{label:"LINK"}},[e._v("Link")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"LINK"==e.board.messageType||"MARKDOWN"==e.board.messageType,expression:"board.messageType=='LINK' || board.messageType=='MARKDOWN'"}],attrs:{label:"消息标题"}},[a("el-input",{attrs:{placeholder:"消息标题"},model:{value:e.board.title,callback:function(t){e.$set(e.board,"title",t)},expression:"board.title"}})],1),e._v(" "),"LINK"==e.board.messageType||"TEXT"==e.board.messageType?a("el-form-item",{attrs:{label:"消息正文"}},[a("el-alert",{staticStyle:{height:"30px"},attrs:{closable:!1,title:"LINK"==e.board.messageType?"消息正文，支持velocity语法，不支持艾特人员":"消息正文，支持velocity语法，并且可以通过@手机号，来艾特具体的人员",type:"success"}}),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"消息正文"},model:{value:e.board.content,callback:function(t){e.$set(e.board,"content",t)},expression:"board.content"}})],1):e._e(),e._v(" "),"MARKDOWN"==e.board.messageType?a("el-form-item",{attrs:{label:"消息正文"}},[a("el-alert",{staticStyle:{height:"30px"},attrs:{closable:!1,title:"消息正文，支持velocity语法，并且可以通过@手机号，来艾特具体的人员",type:"success"}}),e._v(" "),a("markdown-editor",{ref:"markdownEditor",staticStyle:{"line-height":"1px"},attrs:{options:{hideModeSwitch:!0,previewStyle:"tab"}},model:{value:e.board.content,callback:function(t){e.$set(e.board,"content",t)},expression:"board.content"}})],1):e._e(),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"TEXT"==e.board.messageType||"MARKDOWN"==e.board.messageType,expression:"board.messageType=='TEXT' || board.messageType=='MARKDOWN'"}],attrs:{label:"@所有人"}},[a("el-radio-group",{model:{value:e.board.atAll,callback:function(t){e.$set(e.board,"atAll",t)},expression:"board.atAll"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"LINK"==e.board.messageType,expression:"board.messageType=='LINK'"}],attrs:{label:"跳转链接"}},[a("el-input",{attrs:{placeholder:"消息跳转链接"},model:{value:e.board.linkMessageUrl,callback:function(t){e.$set(e.board,"linkMessageUrl",t)},expression:"board.linkMessageUrl"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"LINK"==e.board.messageType,expression:"board.messageType=='LINK'"}],attrs:{label:"配图链接"}},[a("el-input",{attrs:{placeholder:"消息配图链接"},model:{value:e.board.linkPicUrl,callback:function(t){e.$set(e.board,"linkPicUrl",t)},expression:"board.linkPicUrl"}})],1),e._v(" "),e._l(e.board.addresses,(function(t,o){return a("el-form-item",{key:o,attrs:{label:"接收目标"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"机器人名称"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"机器人accessToken"},model:{value:t.groupAccessToken,callback:function(a){e.$set(t,"groupAccessToken",a)},expression:"item.groupAccessToken"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"规则条件"},model:{value:t.condition,callback:function(a){e.$set(t,"condition",a)},expression:"item.condition"}})],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small",circle:""},on:{click:e.addAddress}})],1),e._v(" "),a("el-col",{attrs:{span:1}},[o>0?a("el-button",{attrs:{icon:"el-icon-minus",type:"danger",size:"small",circle:""},on:{click:function(a){return e.removeAddress(t)}}}):e._e()],1)],1)],1)})),e._v(" "),a("el-form-item",[e.showSubmitBtn?a("el-button",{attrs:{type:"primary",disabled:e.submiting,loading:e.submiting},on:{click:e.doSubmit}},[e._v(e._s(e.submiting?"提交中...":"提 交"))]):e._e(),e._v(" "),a("router-link",{attrs:{to:"/board/list"}},[a("el-button",[e._v("取 消")])],1)],1)],2)],1)},i=[],r=(a("6b54"),a("6711")),s=a("16d8"),n={data:function(){return{board:{boardCode:"",boardName:"",messageType:"",title:"",content:"",atAll:"",linkMessageUrl:"",linkPicUrl:"",addresses:[{name:"",groupAccessToken:"",condition:""}]},modify:!1,showSubmitBtn:!0,submiting:!1}},components:{MarkdownEditor:s["a"]},created:function(){var e=this.$route.params;e.boardCode&&this.findData(e.boardCode)},methods:{findData:function(e){var t=this;Object(r["b"])(e).then((function(e){if(e.success){var a=e.content;t.board=a,void 0!=a.atAll&&(t.board.atAll=a.atAll.toString()),t.modify=!0}else t.$notify({title:"提示",type:"info",message:e.errorMsg}),t.showSubmitBtn=!1}))},addAddress:function(){this.board.addresses.push({name:"",groupAccessToken:"",condition:""})},removeAddress:function(e){var t=this.board.addresses.indexOf(e);-1!==t&&this.board.addresses.splice(t,1)},doSubmit:function(){var e=this;this.submiting||(this.modify?(this.submiting=!0,Object(r["d"])(this.board).then((function(t){t.success?(e.$notify({title:"操作成功",type:"success",message:"模板修改成功!"}),setTimeout((function(){e.$router.push("/board/list")}),2e3)):(e.submiting=!1,e.$notify({title:"提示",type:"info",message:t.errorMsg}))}))):(this.submiting=!0,Object(r["a"])(this.board).then((function(t){t.success?(e.$notify({title:"操作成功",type:"success",message:"模板创建成功!"}),setTimeout((function(){e.$router.push("/board/list")}),2e3)):(e.submiting=!1,e.$notify({title:"提示",type:"info",message:t.errorMsg}))}))))}}},l=n,d=a("2877"),c=Object(d["a"])(l,o,i,!1,null,"51cec122",null);t["default"]=c.exports},6711:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return c}));var o=a("b775"),i="http://127.0.0.1:7001/walle";function r(e,t){return Object(o["a"])({baseURL:i,url:"/boards",method:"get",params:{pageNo:e,pageSize:t}})}function s(e){return Object(o["a"])({baseURL:i,url:"/board/"+e,method:"get"})}function n(e){return Object(o["a"])({baseURL:i,url:"/board/create",method:"post",data:e})}function l(e){return Object(o["a"])({baseURL:i,url:"/board/modify",method:"post",data:e})}function d(e){return Object(o["a"])({baseURL:i,url:"/board/remove",method:"post",params:{boardCode:e}})}function c(e,t){return Object(o["a"])({baseURL:i,url:"/message/send",method:"post",data:{boardCode:e,data:t}})}}}]);